{"version":3,"sources":["webpack://@verndale/toolkit/./src/js/modules/accordion.ts"],"names":["Accordion","trigger","e","panel","pannelContent"],"mappings":"yKAEA,MAAMA,UAAkB,WAAU,CAChC,eAAgB,CACd,KAAK,IAAM,CACT,SAAU,KAAK,GAAG,iBAAiB,0BAA0B,EAC7D,OAAQ,KAAK,GAAG,iBAAiB,wBAAwB,CAC3D,EAEA,KAAK,cAAc,CACrB,CAEA,cAAe,CACZ,KAAK,IAAI,SAAsB,QAAQC,GACtCA,EAAQ,iBAAiB,QAAS,KAAK,YAAY,KAAK,IAAI,CAAC,CAC/D,CACF,CAEA,eAAgB,CACb,KAAK,IAAI,SAA2C,QAAQA,GAAW,CAClEA,EAAQ,aAAa,eAAe,IAAM,QAC5C,KAAK,SAASA,CAAO,CAEzB,CAAC,CACH,CAEA,YAAYC,EAAU,CACpB,MAAMD,EAAUC,EAAE,cAEdD,EAAQ,aAAa,eAAe,IAAM,OAC5C,KAAK,UAAUA,CAAO,EAEtB,KAAK,SAASA,CAAO,CAEzB,CAEA,SAASA,EAA4B,CACnCA,EAAQ,aAAa,gBAAiB,MAAM,EAE5C,MAAME,EAAQ,SAAS,eACrBF,EAAQ,aAAa,eAAe,CACtC,EAEA,GAAIE,EAAO,CACT,MAAMC,EAAgBD,EAAM,cAC1B,0BACF,EAEAA,EAAM,MAAM,OAAS,GAAGC,GAAe,iBAEvC,WAAW,IAAOD,EAAM,MAAM,OAAS,OAAS,GAAG,CACrD,CACF,CAEA,UAAUF,EAA4B,CACpCA,EAAQ,aAAa,gBAAiB,OAAO,EAE7C,MAAME,EAAQ,SAAS,eACrBF,EAAQ,aAAa,eAAe,CACtC,EAEA,GAAIE,EAAO,CACT,MAAMC,EAAgBD,EAAM,cAC1B,0BACF,EACAA,EAAM,MAAM,OAAS,GAAGC,GAAe,iBACvC,WAAW,IAAOD,EAAM,MAAM,OAAS,KAAM,CAC/C,CACF,CACF,CAEA,QAAeH,C","file":"scripts/0.bundle.js","sourcesContent":["import { Component } from '@verndale/core';\n\nclass Accordion extends Component {\n  setupDefaults() {\n    this.dom = {\n      triggers: this.el.querySelectorAll('.accordion__item-trigger'),\n      panels: this.el.querySelectorAll('.accordion__item-panel')\n    };\n\n    this.initAccordion();\n  }\n\n  addListeners() {\n    (this.dom.triggers as NodeList).forEach(trigger =>\n      trigger.addEventListener('click', this.handleClick.bind(this))\n    );\n  }\n\n  initAccordion() {\n    (this.dom.triggers as NodeListOf<HTMLButtonElement>).forEach(trigger => {\n      if (trigger.getAttribute('aria-expanded') === 'true') {\n        this.openItem(trigger);\n      }\n    });\n  }\n\n  handleClick(e: Event) {\n    const trigger = e.currentTarget as HTMLButtonElement;\n\n    if (trigger.getAttribute('aria-expanded') === 'true') {\n      this.closeItem(trigger);\n    } else {\n      this.openItem(trigger);\n    }\n  }\n\n  openItem(trigger: HTMLButtonElement) {\n    trigger.setAttribute('aria-expanded', 'true');\n\n    const panel = document.getElementById(\n      trigger.getAttribute('aria-controls') as string\n    );\n\n    if (panel) {\n      const pannelContent = panel.querySelector<HTMLElement>(\n        '.accordion__item-content'\n      );\n\n      panel.style.height = `${pannelContent?.offsetHeight}px`;\n\n      setTimeout(() => (panel.style.height = 'auto'), 250);\n    }\n  }\n\n  closeItem(trigger: HTMLButtonElement) {\n    trigger.setAttribute('aria-expanded', 'false');\n\n    const panel = document.getElementById(\n      trigger.getAttribute('aria-controls') as string\n    );\n\n    if (panel) {\n      const pannelContent = panel.querySelector<HTMLElement>(\n        '.accordion__item-content'\n      );\n      panel.style.height = `${pannelContent?.offsetHeight}px`;\n      setTimeout(() => (panel.style.height = '0px'));\n    }\n  }\n}\n\nexport default Accordion;\n"],"sourceRoot":""}